[INFO]  2025/09/15 09:18:48 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 09:18:48 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 09:18:48 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 09:18:48 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 09:18:50 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 09:18:50 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 09:18:57 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=employment, FileName=在职证明示例.md
[INFO]  2025/09/15 09:18:57 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 241.6155ms
[ERROR] 2025/09/15 09:18:58 logger.go:83: AI提取在职情况信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 09:18:58 logger.go:83: AI文档信息提取失败: DocumentID=19, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 09:18:58 logger.go:83: MD文档自动分析失败: DocumentID=19, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 09:19:00 logger.go:73: HTTP请求: GET /api/users/default-user/documents/19/extracted-info | IP: ::1 | 状态: 400 | 耗时: 56.569125ms
[INFO]  2025/09/15 09:19:01 logger.go:73: 收到消息请求: ThreadID=contract-1757899141823-cegc4g0ob, ModelID=azure/gpt-5-mini, Content长度=6, 附件数量=1
[DEBUG] 2025/09/15 09:19:01 logger.go:68: 用户消息保存成功: ID=120
[INFO]  2025/09/15 09:19:01 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-mini, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 09:19:01 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-mini, Input长度=6
[INFO]  2025/09/15 09:19:01 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899141823-cegc4g0ob | IP: ::1 | 状态: 200 | 耗时: 82.776917ms
[INFO]  2025/09/15 09:19:07 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 09:19:07 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 31.06325ms
[ERROR] 2025/09/15 09:19:08 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 09:19:08 logger.go:83: AI文档信息提取失败: DocumentID=20, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 09:19:08 logger.go:83: MD文档自动分析失败: DocumentID=20, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 09:19:09 logger.go:73: 百炼API调用成功: ModelID=azure/gpt-5-mini, 耗时=8.004845167s, 回复长度=1404
[DEBUG] 2025/09/15 09:19:09 logger.go:68: AI回复生成完成，内容长度: 1438
[DEBUG] 2025/09/15 09:19:10 logger.go:68: AI回复保存成功: ID=121
[INFO]  2025/09/15 09:19:10 logger.go:73: 消息处理完成: ThreadID=contract-1757899141823-cegc4g0ob, 总耗时=8.176221791s
[INFO]  2025/09/15 09:19:10 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 8.176303208s
[INFO]  2025/09/15 09:19:10 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899141823-cegc4g0ob, Category=contract
[INFO]  2025/09/15 09:19:10 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899141823-cegc4g0ob, Category=contract
[INFO]  2025/09/15 09:19:10 logger.go:73: HTTP请求: GET /api/users/default-user/documents/20/extracted-info | IP: ::1 | 状态: 400 | 耗时: 3.479584ms
[WARN]  2025/09/15 09:19:57 logger.go:78: PDF文本提取失败: PDF提取功能暂未实现
[INFO]  2025/09/15 09:19:57 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=other, FileName=Receipt-2616-4031.pdf
[INFO]  2025/09/15 09:19:57 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 43.389875ms
[INFO]  2025/09/15 09:20:03 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 36.984834ms
[INFO]  2025/09/15 09:20:08 logger.go:73: 收到消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=azure/gpt-5-mini, Content长度=15, 附件数量=2
[DEBUG] 2025/09/15 09:20:08 logger.go:68: 用户消息保存成功: ID=122
[INFO]  2025/09/15 09:20:08 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-mini, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 09:20:08 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-mini, Input长度=15
[INFO]  2025/09/15 09:20:15 logger.go:73: 百炼API调用成功: ModelID=azure/gpt-5-mini, 耗时=7.457337167s, 回复长度=1240
[DEBUG] 2025/09/15 09:20:15 logger.go:68: AI回复生成完成，内容长度: 1274
[DEBUG] 2025/09/15 09:20:16 logger.go:68: AI回复保存成功: ID=123
[INFO]  2025/09/15 09:20:16 logger.go:73: 消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=7.754310458s
[INFO]  2025/09/15 09:20:16 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 09:20:16 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 7.944868458s
[INFO]  2025/09/15 09:20:16 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 296.490208ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 303.302125ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 6.940833ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 16.769083ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 13.197875ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 12.593542ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 16.161542ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 28.572125ms
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 29.020458ms
[INFO]  2025/09/15 09:23:45 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.40975ms
[INFO]  2025/09/15 09:23:45 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.770625ms
[INFO]  2025/09/15 09:23:50 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 23.5265ms
[INFO]  2025/09/15 09:24:02 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 58.414166ms
[INFO]  2025/09/15 09:24:05 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 4.54175ms
[INFO]  2025/09/15 09:24:34 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:24:34 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 205.747375ms
[INFO]  2025/09/15 09:24:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 363.033375ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 182.23775ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 221.897959ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 148.018084ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 18.511084ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 51.0225ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 13.530916ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 31.863084ms
[INFO]  2025/09/15 09:24:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.418333ms
[INFO]  2025/09/15 09:24:35 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 19.537542ms
[INFO]  2025/09/15 09:24:39 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 23.019917ms
[INFO]  2025/09/15 09:24:39 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 8.640209ms
[INFO]  2025/09/15 09:24:40 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 5.068917ms
[INFO]  2025/09/15 09:24:43 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 21.573917ms
[INFO]  2025/09/15 09:24:43 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 2.389416ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 8.980792ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 94.88575ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 195.034292ms
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 227.739625ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.115417ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.223625ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 17.856ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.76075ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 15.935541ms
[INFO]  2025/09/15 09:25:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:25:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 18.505042ms
[INFO]  2025/09/15 09:25:58 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 5.055959ms
[INFO]  2025/09/15 09:26:00 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 1.756042ms
[INFO]  2025/09/15 09:27:23 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 19.609875ms
[INFO]  2025/09/15 09:27:23 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 21.125042ms
[INFO]  2025/09/15 09:27:24 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 5.873375ms
[INFO]  2025/09/15 09:27:25 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 21.926125ms
[INFO]  2025/09/15 09:27:26 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 2.920542ms
[INFO]  2025/09/15 09:27:27 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 5.278084ms
[INFO]  2025/09/15 09:27:27 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 1.447708ms
[INFO]  2025/09/15 09:27:28 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 1.381417ms
[INFO]  2025/09/15 09:27:29 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.182ms
[INFO]  2025/09/15 09:27:29 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 8.559708ms
[INFO]  2025/09/15 09:27:32 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 15.262042ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 52.385042ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 109.591083ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 9.295458ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 23.76275ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 16.5295ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.009625ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 57.423541ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.865458ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 20.223917ms
[INFO]  2025/09/15 09:29:25 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:29:25 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.64825ms
[INFO]  2025/09/15 09:29:26 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 215.717167ms
[INFO]  2025/09/15 09:35:21 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 447.946791ms
[INFO]  2025/09/15 09:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 465.237833ms
[INFO]  2025/09/15 09:35:21 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 14.225166ms
[INFO]  2025/09/15 09:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 34.106375ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 67.921875ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 57.325542ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 89.735041ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 13.826333ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 7.230667ms
[INFO]  2025/09/15 09:35:22 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:35:22 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.698042ms
[INFO]  2025/09/15 09:35:25 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 218.800291ms
[INFO]  2025/09/15 09:35:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:35:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 25.738708ms
[INFO]  2025/09/15 09:35:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:35:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 22.510792ms
[INFO]  2025/09/15 09:35:26 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:35:26 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 90.84325ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 7.677583ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 390.577334ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.425083ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 14.122042ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.5155ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.780417ms
[INFO]  2025/09/15 09:35:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.248583ms
[INFO]  2025/09/15 09:35:27 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.2385ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 75.903917ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 78.939041ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 6.177709ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 10.728958ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.065875ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 6.258666ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 7.557167ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 5.111ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 38.570333ms
[INFO]  2025/09/15 09:39:15 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:39:15 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.260458ms
[INFO]  2025/09/15 09:39:16 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.425792ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 91.902875ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 93.102875ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.941583ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 16.837125ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 279.621292ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 16.477208ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 26.446167ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 6.894958ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 20.0245ms
[INFO]  2025/09/15 09:40:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:40:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 10.692083ms
[INFO]  2025/09/15 09:40:37 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 14.5505ms
[INFO]  2025/09/15 09:40:37 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 36.962209ms
[INFO]  2025/09/15 09:40:38 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 7.352709ms
[INFO]  2025/09/15 09:40:39 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 34.659209ms
[INFO]  2025/09/15 09:40:40 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 42.562791ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 440.25325ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 489.305208ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 59.637958ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 29.466208ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 209.558958ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 75.207792ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 94.626667ms
[INFO]  2025/09/15 09:53:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:53:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 23.595042ms
[INFO]  2025/09/15 09:53:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 09:53:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 58.36775ms
[INFO]  2025/09/15 09:53:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 09:53:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 31.595417ms
[INFO]  2025/09/15 11:19:16 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 11:19:16 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 11:19:16 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 11:19:16 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 11:19:18 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 11:19:18 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 11:24:25 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:24:25 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 38.337917ms
[INFO]  2025/09/15 11:24:26 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:24:26 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 49.073833ms
[INFO]  2025/09/15 11:24:26 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:24:26 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 12.432417ms
[INFO]  2025/09/15 11:24:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:24:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 136.339375ms
[INFO]  2025/09/15 11:24:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:24:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 5.712542ms
[INFO]  2025/09/15 11:24:26 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:24:26 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 6.877459ms
[INFO]  2025/09/15 11:24:42 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757906608454-gudv3pfrt | IP: ::1 | 状态: 200 | 耗时: 40.48725ms
[INFO]  2025/09/15 11:25:37 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 11:25:37 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 11:25:37 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 11:25:37 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 11:25:38 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 11:25:38 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 11:25:42 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:25:42 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 30.481333ms
[INFO]  2025/09/15 11:25:42 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:25:42 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.337959ms
[INFO]  2025/09/15 11:25:42 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:42 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 30.103542ms
[INFO]  2025/09/15 11:25:42 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:42 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 3.710375ms
[INFO]  2025/09/15 11:25:42 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:42 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.129708ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 10.954083ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 32.481167ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.432541ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 26.6835ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.075666ms
[INFO]  2025/09/15 11:25:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:25:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 6.299042ms
[INFO]  2025/09/15 11:26:01 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 11:26:01 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 917.586333ms
[ERROR] 2025/09/15 11:26:02 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 11:26:02 logger.go:83: AI文档信息提取失败: DocumentID=22, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 11:26:02 logger.go:83: MD文档自动分析失败: DocumentID=22, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 11:26:42 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757906802445-2ue8j9fmt | IP: ::1 | 状态: 200 | 耗时: 318.937ms
[INFO]  2025/09/15 11:26:43 logger.go:73: HTTP请求: OPTIONS /api/messages | IP: ::1 | 状态: 404 | 耗时: 583ns
[INFO]  2025/09/15 11:26:57 logger.go:73: HTTP请求: OPTIONS /api/messages | IP: ::1 | 状态: 404 | 耗时: 2.334µs
[INFO]  2025/09/15 11:27:51 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 11:27:51 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 11:27:51 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 11:27:51 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 11:27:51 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 11:27:51 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 124.42675ms
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 13.408084ms
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 9.640125ms
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 155.264375ms
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 23.170292ms
[INFO]  2025/09/15 11:27:54 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:27:54 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 22.827042ms
[WARN]  2025/09/15 11:28:01 logger.go:78: 用户档案不存在，返回默认模型: UserID=user-1757757423810
[INFO]  2025/09/15 11:28:01 logger.go:73: HTTP请求: GET /api/users/user-1757757423810/default-model | IP: ::1 | 状态: 200 | 耗时: 3.191375ms
[INFO]  2025/09/15 11:28:01 logger.go:73: 获取职业历史记录: UserID=user-1757757423810, Category=career, 数量=0
[INFO]  2025/09/15 11:28:01 logger.go:73: HTTP请求: GET /api/users/user-1757757423810/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 5.197458ms
[INFO]  2025/09/15 11:28:04 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:28:04 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.963292ms
[INFO]  2025/09/15 11:28:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:28:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.89975ms
[INFO]  2025/09/15 11:28:07 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757906887482-locy2ztdg | IP: ::1 | 状态: 200 | 耗时: 3.871417ms
[INFO]  2025/09/15 11:28:11 logger.go:73: HTTP请求: OPTIONS /api/messages | IP: ::1 | 状态: 404 | 耗时: 1.042µs
[INFO]  2025/09/15 11:28:17 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 11:28:17 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 35.448958ms
[ERROR] 2025/09/15 11:28:23 logger.go:83: 解析合同信息失败: invalid character '`' looking for beginning of value
[ERROR] 2025/09/15 11:28:23 logger.go:83: AI文档信息提取失败: DocumentID=23, 错误=invalid character '`' looking for beginning of value
[ERROR] 2025/09/15 11:28:23 logger.go:83: MD文档自动分析失败: DocumentID=23, 错误=invalid character '`' looking for beginning of value
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 85.422083ms
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 108.690417ms
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 12.430291ms
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 46.208458ms
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 19.083458ms
[INFO]  2025/09/15 11:30:35 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:35 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 120.209583ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 122.711125ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 147.442834ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 39.155125ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 39.124958ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 19.352416ms
[INFO]  2025/09/15 11:30:37 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:30:37 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 14.556333ms
[INFO]  2025/09/15 11:30:59 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 11:30:59 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 11:30:59 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 11:30:59 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 11:30:59 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 11:30:59 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 108.612417ms
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 6.022125ms
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.708417ms
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 160.678167ms
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.792ms
[INFO]  2025/09/15 11:31:00 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:31:00 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.078042ms
[INFO]  2025/09/15 11:31:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:31:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 5.063375ms
[INFO]  2025/09/15 11:31:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:31:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.551917ms
[INFO]  2025/09/15 11:31:02 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:31:02 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 10.5245ms
[INFO]  2025/09/15 11:31:02 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:31:02 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.381542ms
[INFO]  2025/09/15 11:31:11 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=employment, FileName=在职证明示例.md
[INFO]  2025/09/15 11:31:11 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 15.925542ms
[ERROR] 2025/09/15 11:31:15 logger.go:83: 解析在职情况信息失败: invalid character '`' looking for beginning of value
[ERROR] 2025/09/15 11:31:15 logger.go:83: AI文档信息提取失败: DocumentID=24, 错误=invalid character '`' looking for beginning of value
[ERROR] 2025/09/15 11:31:15 logger.go:83: MD文档自动分析失败: DocumentID=24, 错误=invalid character '`' looking for beginning of value
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 76.881208ms
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 77.758042ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 32.605792ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 38.354959ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 4.015417ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 21.262042ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 25.879458ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 31.124083ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 8.874458ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 17.068875ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 28.215375ms
[INFO]  2025/09/15 11:33:07 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:33:07 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 49.575542ms
[INFO]  2025/09/15 11:34:31 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 11:34:31 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 11:34:31 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 11:34:31 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 11:34:31 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 11:34:31 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 28.687417ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 50.219542ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.637708ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 7.918958ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 13.75475ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.401667ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 19.441375ms
[INFO]  2025/09/15 11:34:36 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:36 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.873959ms
[INFO]  2025/09/15 11:34:37 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:37 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 7.612375ms
[INFO]  2025/09/15 11:34:37 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:37 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 3.447917ms
[INFO]  2025/09/15 11:34:37 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 8.872125ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 8.22625ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 22.919583ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 4.265708ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.911791ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.603917ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.465083ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 11.975667ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 9.133916ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.7805ms
[INFO]  2025/09/15 11:34:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.780916ms
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 10.761208ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.735042ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.282459ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 1.97375ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 29.045041ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 6.319916ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.690333ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 23.5ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 5.086875ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 6.083666ms
[INFO]  2025/09/15 11:34:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 11:34:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 17.09425ms
[INFO]  2025/09/15 11:34:42 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 4.480416ms
[INFO]  2025/09/15 11:34:45 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752072978-tgb6a5v14 | IP: ::1 | 状态: 200 | 耗时: 2.572583ms
[INFO]  2025/09/15 11:34:53 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 5.6535ms
[INFO]  2025/09/15 11:35:42 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 18.427917ms
[INFO]  2025/09/15 11:35:57 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 5.296875ms
[INFO]  2025/09/15 11:36:09 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 5.59575ms
[INFO]  2025/09/15 11:36:20 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 4.849709ms
[INFO]  2025/09/15 11:40:57 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 16.5165ms
[INFO]  2025/09/15 11:41:15 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 7.486583ms
[INFO]  2025/09/15 11:41:29 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 30.95675ms
[INFO]  2025/09/15 11:43:43 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 7.344791ms
[INFO]  2025/09/15 11:43:49 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 3.645167ms
[INFO]  2025/09/15 11:45:44 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 6.060125ms
[INFO]  2025/09/15 11:45:49 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 3.038125ms
[INFO]  2025/09/15 11:45:50 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 2.398375ms
[INFO]  2025/09/15 19:50:26 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 19:50:26 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 19:50:26 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 19:50:26 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 19:50:27 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 19:50:27 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 19:51:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 286.321583ms
[INFO]  2025/09/15 19:51:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 609.3485ms
[INFO]  2025/09/15 19:51:02 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 19:51:02 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 698.178125ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 24.487584ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 29.838167ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.132292ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.948208ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 25.649125ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 32.578625ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-chat
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.098208ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=2
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.354416ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.869ms
[INFO]  2025/09/15 19:51:04 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 19:51:04 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 1.601959ms
[INFO]  2025/09/15 19:51:05 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 19:51:05 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 5.897208ms
[INFO]  2025/09/15 19:51:05 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 19:51:05 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 13.91425ms
[INFO]  2025/09/15 19:51:05 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 19:51:05 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 7.223791ms
[INFO]  2025/09/15 19:51:05 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 19:51:05 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.434167ms
[INFO]  2025/09/15 19:51:05 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 3.166209ms
[INFO]  2025/09/15 19:51:20 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 34.824583ms
[INFO]  2025/09/15 19:51:21 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 2.283458ms
[INFO]  2025/09/15 19:51:21 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 3.878042ms
[INFO]  2025/09/15 19:51:22 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 980.25µs
[INFO]  2025/09/15 19:51:23 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 3.134167ms
[INFO]  2025/09/15 19:51:24 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 12.360625ms
[INFO]  2025/09/15 19:51:25 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 1.99375ms
[INFO]  2025/09/15 19:51:32 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 19:51:32 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 65.850083ms
[ERROR] 2025/09/15 19:51:33 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:51:33 logger.go:83: AI文档信息提取失败: DocumentID=25, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:51:33 logger.go:83: MD文档自动分析失败: DocumentID=25, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 19:51:35 logger.go:73: HTTP请求: GET /api/users/default-user/documents/25/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.432708ms
[INFO]  2025/09/15 19:51:37 logger.go:73: 收到消息请求: ThreadID=career-1757751576660-lyljpszcn, ModelID=azure/gpt-5-chat, Content长度=9, 附件数量=1
[DEBUG] 2025/09/15 19:51:37 logger.go:68: 用户消息保存成功: ID=124
[INFO]  2025/09/15 19:51:37 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-chat, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 19:51:37 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-chat, Input长度=9
[INFO]  2025/09/15 19:51:43 logger.go:73: 百炼API调用成功: ModelID=azure/gpt-5-chat, 耗时=5.888841083s, 回复长度=534
[DEBUG] 2025/09/15 19:51:43 logger.go:68: AI回复生成完成，内容长度: 568
[DEBUG] 2025/09/15 19:51:43 logger.go:68: AI回复保存成功: ID=125
[INFO]  2025/09/15 19:51:43 logger.go:73: 消息处理完成: ThreadID=career-1757751576660-lyljpszcn, 总耗时=5.896825875s
[INFO]  2025/09/15 19:51:43 logger.go:73: 保存职业历史记录: ThreadID=career-1757751576660-lyljpszcn, Category=career
[INFO]  2025/09/15 19:51:43 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 5.896916125s
[INFO]  2025/09/15 19:51:43 logger.go:73: 职业历史记录保存成功: ThreadID=career-1757751576660-lyljpszcn, Category=career
[INFO]  2025/09/15 19:51:55 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757747719958 | IP: ::1 | 状态: 200 | 耗时: 25.141167ms
[INFO]  2025/09/15 19:51:56 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 4.306375ms
[INFO]  2025/09/15 19:52:01 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.222459ms
[INFO]  2025/09/15 19:52:07 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 19:52:07 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 8.81275ms
[ERROR] 2025/09/15 19:52:08 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:52:08 logger.go:83: AI文档信息提取失败: DocumentID=26, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:52:08 logger.go:83: MD文档自动分析失败: DocumentID=26, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 19:52:10 logger.go:73: HTTP请求: GET /api/users/default-user/documents/26/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.722708ms
[INFO]  2025/09/15 19:52:11 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 19:52:11 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 6.452458ms
[INFO]  2025/09/15 19:52:16 logger.go:73: HTTP请求: GET /api/users/default-user/documents/26/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.464ms
[INFO]  2025/09/15 19:52:16 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=18, 附件数量=1
[INFO]  2025/09/15 19:52:16 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 19:52:18 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 19:52:18 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=1.583822958s
[INFO]  2025/09/15 19:52:18 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 1.58385825s
[INFO]  2025/09/15 19:52:18 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:18 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:18 logger.go:73: 收到消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=18, 附件数量=1
[DEBUG] 2025/09/15 19:52:18 logger.go:68: 用户消息保存成功: ID=128
[INFO]  2025/09/15 19:52:18 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 19:52:18 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=18
[INFO]  2025/09/15 19:52:22 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=3.810833125s, 回复长度=1423
[DEBUG] 2025/09/15 19:52:22 logger.go:68: AI回复生成完成，内容长度: 1459
[DEBUG] 2025/09/15 19:52:22 logger.go:68: AI回复保存成功: ID=129
[INFO]  2025/09/15 19:52:22 logger.go:73: 消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=3.816800417s
[INFO]  2025/09/15 19:52:22 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:22 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 3.816943334s
[INFO]  2025/09/15 19:52:22 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:32 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 19:52:32 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 11.203834ms
[ERROR] 2025/09/15 19:52:33 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:52:33 logger.go:83: AI文档信息提取失败: DocumentID=27, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 19:52:33 logger.go:83: MD文档自动分析失败: DocumentID=27, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 19:52:35 logger.go:73: HTTP请求: GET /api/users/default-user/documents/27/extracted-info | IP: ::1 | 状态: 400 | 耗时: 833.5µs
[INFO]  2025/09/15 19:52:38 logger.go:73: HTTP请求: GET /api/users/default-user/documents/27/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.179542ms
[INFO]  2025/09/15 19:52:38 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=30, 附件数量=1
[INFO]  2025/09/15 19:52:38 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 19:52:42 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 19:52:42 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=3.677658333s
[INFO]  2025/09/15 19:52:42 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 3.67770675s
[INFO]  2025/09/15 19:52:42 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:42 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:42 logger.go:73: 收到消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=30, 附件数量=1
[DEBUG] 2025/09/15 19:52:42 logger.go:68: 用户消息保存成功: ID=132
[INFO]  2025/09/15 19:52:42 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 19:52:42 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=30
[INFO]  2025/09/15 19:52:47 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=4.81583825s, 回复长度=1919
[DEBUG] 2025/09/15 19:52:47 logger.go:68: AI回复生成完成，内容长度: 1955
[DEBUG] 2025/09/15 19:52:47 logger.go:68: AI回复保存成功: ID=133
[INFO]  2025/09/15 19:52:47 logger.go:73: 消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=4.820353583s
[INFO]  2025/09/15 19:52:47 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:52:47 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 4.820498458s
[INFO]  2025/09/15 19:52:47 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 19:55:14 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899141823-cegc4g0ob | IP: ::1 | 状态: 200 | 耗时: 2.502292ms
[INFO]  2025/09/15 19:55:16 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.433458ms
[INFO]  2025/09/15 19:56:37 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 5.72575ms
[INFO]  2025/09/15 19:56:39 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 25.583542ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 20.469792ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=3
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 32.962208ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 3.239833ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=3
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.621375ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 6.766375ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=3
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 9.365083ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 68.55725ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 50.502959ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 44.422083ms
[INFO]  2025/09/15 19:59:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=4
[INFO]  2025/09/15 19:59:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 38.847875ms
[INFO]  2025/09/15 19:59:41 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 7.0086035s
[INFO]  2025/09/15 19:59:47 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 32.091417ms
[INFO]  2025/09/15 20:00:46 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 8.182417ms
[INFO]  2025/09/15 20:00:46 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 6.453584ms
[INFO]  2025/09/15 20:00:48 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 2.702291ms
[INFO]  2025/09/15 20:00:50 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757937650853-ps3v7ggdp | IP: ::1 | 状态: 200 | 耗时: 1.336667ms
[INFO]  2025/09/15 20:00:51 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 1.91875ms
[INFO]  2025/09/15 20:02:02 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.746958ms
[INFO]  2025/09/15 20:02:06 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 6.924959ms
[INFO]  2025/09/15 20:02:41 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757937650853-ps3v7ggdp | IP: ::1 | 状态: 200 | 耗时: 991.916µs
[INFO]  2025/09/15 20:03:10 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 2.410584ms
[INFO]  2025/09/15 20:03:10 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 1.676666ms
[INFO]  2025/09/15 20:03:21 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.627042ms
[INFO]  2025/09/15 20:03:21 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757937650853-ps3v7ggdp | IP: ::1 | 状态: 200 | 耗时: 1.07175ms
[INFO]  2025/09/15 20:03:22 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 2.555958ms
[INFO]  2025/09/15 20:03:23 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 1.804416ms
[INFO]  2025/09/15 20:03:27 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 5.888708ms
[INFO]  2025/09/15 20:04:06 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757752559966-04ckwoid6 | IP: ::1 | 状态: 200 | 耗时: 2.69625ms
[INFO]  2025/09/15 20:04:07 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 36.5525ms
[INFO]  2025/09/15 20:04:12 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 20:04:12 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 57.068333ms
[ERROR] 2025/09/15 20:04:13 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 20:04:13 logger.go:83: AI文档信息提取失败: DocumentID=28, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 20:04:13 logger.go:83: MD文档自动分析失败: DocumentID=28, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 20:04:15 logger.go:73: HTTP请求: GET /api/users/default-user/documents/28/extracted-info | IP: ::1 | 状态: 400 | 耗时: 4.503792ms
[INFO]  2025/09/15 20:04:20 logger.go:73: HTTP请求: GET /api/users/default-user/documents/28/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.12325ms
[INFO]  2025/09/15 20:04:21 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=bailian/qwen-flash, Content长度=6, 附件数量=1
[INFO]  2025/09/15 20:04:21 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 20:04:23 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 20:04:23 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=2.284483875s
[INFO]  2025/09/15 20:04:23 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 2.284598584s
[INFO]  2025/09/15 20:04:23 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 20:04:23 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 20:04:23 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=bailian/qwen-flash, Content长度=6, 附件数量=1
[DEBUG] 2025/09/15 20:04:23 logger.go:68: 用户消息保存成功: ID=136
[INFO]  2025/09/15 20:04:23 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:04:23 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=6
[INFO]  2025/09/15 20:04:24 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=1.00652325s, 回复长度=381
[DEBUG] 2025/09/15 20:04:24 logger.go:68: AI回复生成完成，内容长度: 417
[DEBUG] 2025/09/15 20:04:24 logger.go:68: AI回复保存成功: ID=137
[INFO]  2025/09/15 20:04:24 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=1.1003165s
[INFO]  2025/09/15 20:04:24 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 20:04:24 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 1.100463208s
[INFO]  2025/09/15 20:04:24 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 20:05:32 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:05:32 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.945959ms
[INFO]  2025/09/15 20:05:38 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=azure/gpt-5-mini, Content长度=18, 附件数量=0
[DEBUG] 2025/09/15 20:05:38 logger.go:68: 用户消息保存成功: ID=138
[INFO]  2025/09/15 20:05:38 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-mini, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:05:38 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-mini, Input长度=18
[INFO]  2025/09/15 20:05:44 logger.go:73: 百炼API调用成功: ModelID=azure/gpt-5-mini, 耗时=6.321495917s, 回复长度=848
[DEBUG] 2025/09/15 20:05:44 logger.go:68: AI回复生成完成，内容长度: 882
[DEBUG] 2025/09/15 20:05:44 logger.go:68: AI回复保存成功: ID=139
[INFO]  2025/09/15 20:05:44 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=6.328165917s
[INFO]  2025/09/15 20:05:44 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 20:05:44 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 6.328368625s
[INFO]  2025/09/15 20:05:44 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[WARN]  2025/09/15 20:09:17 logger.go:78: 用户档案不存在，返回默认模型: UserID=user-1757938157855
[INFO]  2025/09/15 20:09:17 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=career, 数量=0
[INFO]  2025/09/15 20:09:17 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/default-model | IP: ::1 | 状态: 200 | 耗时: 2.608541ms
[INFO]  2025/09/15 20:09:17 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.773833ms
[INFO]  2025/09/15 20:09:17 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=offer, 数量=0
[INFO]  2025/09/15 20:09:17 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 12.55475ms
[INFO]  2025/09/15 20:09:17 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=contract, 数量=0
[INFO]  2025/09/15 20:09:17 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 1.369625ms
[INFO]  2025/09/15 20:09:17 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=monitor, 数量=0
[INFO]  2025/09/15 20:09:17 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.302542ms
[INFO]  2025/09/15 20:09:27 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 902.5µs
[INFO]  2025/09/15 20:09:29 logger.go:73: 收到流式消息请求: ThreadID=offer-1757938167076-1vgjgfuxo, ModelID=bailian/qwen-flash, Content长度=71, 附件数量=0
[INFO]  2025/09/15 20:09:29 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 20:09:37 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 20:09:37 logger.go:73: 流式消息处理完成: ThreadID=offer-1757938167076-1vgjgfuxo, 总耗时=8.239352542s
[INFO]  2025/09/15 20:09:37 logger.go:73: 保存职业历史记录: ThreadID=offer-1757938167076-1vgjgfuxo, Category=offer
[INFO]  2025/09/15 20:09:37 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 8.239399875s
[INFO]  2025/09/15 20:09:37 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757938167076-1vgjgfuxo, Category=offer
[INFO]  2025/09/15 20:09:37 logger.go:73: 收到消息请求: ThreadID=offer-1757938167076-1vgjgfuxo, ModelID=bailian/qwen-flash, Content长度=71, 附件数量=0
[DEBUG] 2025/09/15 20:09:37 logger.go:68: 用户消息保存成功: ID=142
[INFO]  2025/09/15 20:09:37 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:09:37 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=71
[INFO]  2025/09/15 20:09:45 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=8.566278s, 回复长度=3439
[DEBUG] 2025/09/15 20:09:45 logger.go:68: AI回复生成完成，内容长度: 3475
[DEBUG] 2025/09/15 20:09:45 logger.go:68: AI回复保存成功: ID=143
[INFO]  2025/09/15 20:09:45 logger.go:73: 消息处理完成: ThreadID=offer-1757938167076-1vgjgfuxo, 总耗时=8.572240667s
[INFO]  2025/09/15 20:09:45 logger.go:73: 保存职业历史记录: ThreadID=offer-1757938167076-1vgjgfuxo, Category=offer
[INFO]  2025/09/15 20:09:45 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 8.573331541s
[INFO]  2025/09/15 20:09:45 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757938167076-1vgjgfuxo, Category=offer
[INFO]  2025/09/15 20:10:23 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 2.387375ms
[INFO]  2025/09/15 20:10:24 logger.go:73: 收到流式消息请求: ThreadID=contract-1757938223182-t8ty9k6ux, ModelID=bailian/qwen-flash, Content长度=63, 附件数量=0
[INFO]  2025/09/15 20:10:24 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 20:10:32 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 20:10:32 logger.go:73: 流式消息处理完成: ThreadID=contract-1757938223182-t8ty9k6ux, 总耗时=7.452456542s
[INFO]  2025/09/15 20:10:32 logger.go:73: 保存职业历史记录: ThreadID=contract-1757938223182-t8ty9k6ux, Category=contract
[INFO]  2025/09/15 20:10:32 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 7.452516583s
[INFO]  2025/09/15 20:10:32 logger.go:73: 收到消息请求: ThreadID=contract-1757938223182-t8ty9k6ux, ModelID=bailian/qwen-flash, Content长度=63, 附件数量=0
[INFO]  2025/09/15 20:10:32 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757938223182-t8ty9k6ux, Category=monitor
[DEBUG] 2025/09/15 20:10:32 logger.go:68: 用户消息保存成功: ID=146
[INFO]  2025/09/15 20:10:32 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:10:32 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=63
[INFO]  2025/09/15 20:10:40 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=8.110075583s, 回复长度=3480
[DEBUG] 2025/09/15 20:10:40 logger.go:68: AI回复生成完成，内容长度: 3516
[DEBUG] 2025/09/15 20:10:40 logger.go:68: AI回复保存成功: ID=147
[INFO]  2025/09/15 20:10:40 logger.go:73: 消息处理完成: ThreadID=contract-1757938223182-t8ty9k6ux, 总耗时=8.123986667s
[INFO]  2025/09/15 20:10:40 logger.go:73: 保存职业历史记录: ThreadID=contract-1757938223182-t8ty9k6ux, Category=contract
[INFO]  2025/09/15 20:10:40 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 8.124237417s
[INFO]  2025/09/15 20:10:40 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757938223182-t8ty9k6ux, Category=monitor
[INFO]  2025/09/15 20:10:44 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 952.292µs
[INFO]  2025/09/15 20:10:45 logger.go:73: 收到流式消息请求: ThreadID=career-1757938244094-uuv57kxii, ModelID=bailian/qwen-flash, Content长度=58, 附件数量=0
[INFO]  2025/09/15 20:10:45 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 20:10:53 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 20:10:53 logger.go:73: 流式消息处理完成: ThreadID=career-1757938244094-uuv57kxii, 总耗时=8.298781583s
[INFO]  2025/09/15 20:10:53 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 8.298853667s
[INFO]  2025/09/15 20:10:53 logger.go:73: 保存职业历史记录: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 20:10:53 logger.go:73: 职业历史记录保存成功: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 20:10:53 logger.go:73: 收到消息请求: ThreadID=career-1757938244094-uuv57kxii, ModelID=bailian/qwen-flash, Content长度=58, 附件数量=0
[DEBUG] 2025/09/15 20:10:53 logger.go:68: 用户消息保存成功: ID=150
[INFO]  2025/09/15 20:10:53 logger.go:73: 开始生成AI回复: ModelID=bailian/qwen-flash, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:10:53 logger.go:73: 开始调用百炼API: ModelID=bailian/qwen-flash, Input长度=58
[INFO]  2025/09/15 20:11:10 logger.go:73: 百炼API调用成功: ModelID=bailian/qwen-flash, 耗时=16.669885125s, 回复长度=7239
[DEBUG] 2025/09/15 20:11:10 logger.go:68: AI回复生成完成，内容长度: 7275
[DEBUG] 2025/09/15 20:11:10 logger.go:68: AI回复保存成功: ID=151
[INFO]  2025/09/15 20:11:10 logger.go:73: 消息处理完成: ThreadID=career-1757938244094-uuv57kxii, 总耗时=16.67830975s
[INFO]  2025/09/15 20:11:10 logger.go:73: 保存职业历史记录: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 20:11:10 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 16.680308167s
[INFO]  2025/09/15 20:11:10 logger.go:73: 职业历史记录保存成功: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 20:11:33 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 32.24875ms
[INFO]  2025/09/15 20:11:39 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 2.21275ms
[INFO]  2025/09/15 20:12:47 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 3.430417ms
[INFO]  2025/09/15 20:12:50 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938370221-tmulunjf1 | IP: ::1 | 状态: 200 | 耗时: 994.041µs
[INFO]  2025/09/15 20:12:57 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:12:57 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.476458ms
[INFO]  2025/09/15 20:12:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:12:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.413084ms
[INFO]  2025/09/15 20:12:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=5
[INFO]  2025/09/15 20:12:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.371625ms
[INFO]  2025/09/15 20:12:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 20:12:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.066334ms
[INFO]  2025/09/15 20:12:57 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 20:12:57 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.645917ms
[INFO]  2025/09/15 20:12:59 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 1.724916ms
[INFO]  2025/09/15 20:13:02 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 2.507333ms
[INFO]  2025/09/15 20:15:01 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 10.70475ms
[INFO]  2025/09/15 20:19:11 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 3.734458ms
[INFO]  2025/09/15 20:22:00 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 7.149333ms
[INFO]  2025/09/15 20:22:52 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.351208ms
[INFO]  2025/09/15 20:22:53 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 3.674625ms
[INFO]  2025/09/15 20:22:53 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757750016900 | IP: ::1 | 状态: 200 | 耗时: 4.589917ms
[INFO]  2025/09/15 20:22:54 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.2505ms
[INFO]  2025/09/15 20:22:55 logger.go:73: HTTP请求: GET /api/messages?threadId=monitor-1757751677926-qnphbr24o | IP: ::1 | 状态: 200 | 耗时: 1.545791ms
[INFO]  2025/09/15 20:22:56 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 3.464167ms
[INFO]  2025/09/15 20:24:16 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 3.942417ms
[INFO]  2025/09/15 20:25:06 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.981542ms
[INFO]  2025/09/15 20:25:44 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.895333ms
[INFO]  2025/09/15 20:28:03 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.875666ms
[INFO]  2025/09/15 20:28:04 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757938167076-1vgjgfuxo | IP: ::1 | 状态: 200 | 耗时: 1.497208ms
[INFO]  2025/09/15 20:28:05 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757751576660-lyljpszcn | IP: ::1 | 状态: 200 | 耗时: 1.68475ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 10.558291ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 22.095625ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.473583ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=5
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 80.479917ms
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 66.655041ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=5
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 46.089458ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 61.617542ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.950375ms
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 16.503208ms
[INFO]  2025/09/15 20:30:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 20:30:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.954ms
[INFO]  2025/09/15 20:30:03 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.539333ms
[INFO]  2025/09/15 20:31:21 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 20:31:21 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 20:31:22 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 20:31:22 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 20:31:22 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 20:31:22 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 5.93725ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.174333ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 45.297709ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 6.088125ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=5
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.136625ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=5
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 73.01675ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 29.992375ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 26.219542ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 41.960541ms
[INFO]  2025/09/15 20:31:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 20:31:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 20.936542ms
[INFO]  2025/09/15 20:31:31 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 28.566875ms
[INFO]  2025/09/15 20:31:46 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757939506672-4bl7u29o8 | IP: ::1 | 状态: 200 | 耗时: 5.337584ms
[INFO]  2025/09/15 20:38:35 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 20:38:35 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 20:38:35 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 20:38:35 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 20:38:35 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 20:38:35 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 20:38:40 logger.go:73: 收到消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=azure/gpt-5-mini, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 20:38:40 logger.go:68: 用户消息保存成功: ID=152
[INFO]  2025/09/15 20:38:40 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-mini, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 20:38:40 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-mini, Input长度=72
[INFO]  2025/09/15 20:39:02 logger.go:73: 百炼API调用成功: ModelID=azure/gpt-5-mini, 耗时=22.099796375s, 回复长度=4777
[DEBUG] 2025/09/15 20:39:02 logger.go:68: AI回复生成完成，内容长度: 4811
[DEBUG] 2025/09/15 20:39:02 logger.go:68: AI回复保存成功: ID=153
[INFO]  2025/09/15 20:39:02 logger.go:73: 消息处理完成: ThreadID=offer-1757939893659-72w5wjhie, 总耗时=22.125173875s
[INFO]  2025/09/15 20:39:02 logger.go:73: 保存职业历史记录: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 20:39:02 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 22.125945208s
[INFO]  2025/09/15 20:39:02 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 20:39:03 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 1.430542ms
[INFO]  2025/09/15 20:39:05 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 1.493333ms
[INFO]  2025/09/15 20:39:32 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 20:39:32 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 56.557625ms
[ERROR] 2025/09/15 20:39:33 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 20:39:33 logger.go:83: AI文档信息提取失败: DocumentID=29, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 20:39:33 logger.go:83: MD文档自动分析失败: DocumentID=29, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 20:39:35 logger.go:73: 收到消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=azure/gpt-5-mini, Content长度=9, 附件数量=1
[ERROR] 2025/09/15 20:39:35 logger.go:83: 保存用户消息失败: Error 1366 (HY000): Incorrect string value: '\xE4\xB8\x0A......' for column 'content' at row 1
[INFO]  2025/09/15 20:39:35 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 500 | 耗时: 14.454792ms
[INFO]  2025/09/15 20:39:35 logger.go:73: HTTP请求: GET /api/users/default-user/documents/29/extracted-info | IP: ::1 | 状态: 400 | 耗时: 4.120166ms
[INFO]  2025/09/15 20:48:01 logger.go:73: 收到流式消息请求: ThreadID=test-thread-123, ModelID=bailian/qwen-flash, Content长度=30, 附件数量=0
[INFO]  2025/09/15 20:48:01 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 20:48:04 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 20:48:04 logger.go:73: 流式消息处理完成: ThreadID=test-thread-123, 总耗时=2.553928125s
[INFO]  2025/09/15 20:48:04 logger.go:73: HTTP请求: POST /api/messages/stream | IP: 127.0.0.1 | 状态: 200 | 耗时: 2.554109166s
[INFO]  2025/09/15 20:48:04 logger.go:73: 保存职业历史记录: ThreadID=test-thread-123, Category=unknown
[INFO]  2025/09/15 20:48:04 logger.go:73: 职业历史记录保存成功: ThreadID=test-thread-123, Category=unknown
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 62.430083ms
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.13825ms
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.216209ms
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 90.213ms
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 11.671375ms
[INFO]  2025/09/15 20:56:41 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 20:56:41 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 1.451542ms
[INFO]  2025/09/15 20:56:47 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757941007741-efq9bmzcg | IP: ::1 | 状态: 200 | 耗时: 2.455916ms
[INFO]  2025/09/15 20:56:49 logger.go:73: HTTP请求: OPTIONS /api/messages | IP: ::1 | 状态: 404 | 耗时: 1.041µs
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 127.247792ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 130.54075ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 5.037917ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 12.885542ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 6.197875ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.486667ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.502375ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.697416ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.189125ms
[INFO]  2025/09/15 21:02:39 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:02:39 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.207625ms
[INFO]  2025/09/15 21:02:41 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 6.003291ms
[INFO]  2025/09/15 21:05:23 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:05:23 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 15.590833ms
[INFO]  2025/09/15 21:05:23 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:05:23 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 17.447125ms
[INFO]  2025/09/15 21:11:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:11:29 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:11:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 7.88525ms
[INFO]  2025/09/15 21:11:29 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.04525ms
[INFO]  2025/09/15 21:11:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:11:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.358084ms
[INFO]  2025/09/15 21:11:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:11:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 5.73ms
[INFO]  2025/09/15 21:11:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:11:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 45.564167ms
[INFO]  2025/09/15 21:11:31 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 66.193625ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 203.377709ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 211.298834ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 6.997583ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 38.425666ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 8.060792ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.925ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 15.19925ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 8.263708ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 13.079209ms
[INFO]  2025/09/15 21:18:31 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:18:31 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 16.4945ms
[INFO]  2025/09/15 21:18:32 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 29.231417ms
[INFO]  2025/09/15 21:18:35 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 15.324375ms
[INFO]  2025/09/15 21:18:35 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 14.009375ms
[INFO]  2025/09/15 21:18:38 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 10.3675ms
[INFO]  2025/09/15 21:20:02 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 17.263708ms
[INFO]  2025/09/15 21:20:03 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 1.537667ms
[INFO]  2025/09/15 21:20:04 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 7.409125ms
[INFO]  2025/09/15 21:23:01 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:23:01 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 18.62025ms
[INFO]  2025/09/15 21:23:01 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:23:01 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 26.799667ms
[INFO]  2025/09/15 21:23:01 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:23:01 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 4.118041ms
[INFO]  2025/09/15 21:23:01 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:23:01 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 9.170875ms
[INFO]  2025/09/15 21:23:01 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:23:01 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.882208ms
[INFO]  2025/09/15 21:23:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=6
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 9.566917ms
[INFO]  2025/09/15 21:23:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 8.395792ms
[INFO]  2025/09/15 21:23:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:23:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 10.774083ms
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 12.753542ms
[INFO]  2025/09/15 21:23:02 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.668041ms
[INFO]  2025/09/15 21:23:02 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 26.987209ms
[INFO]  2025/09/15 21:23:09 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 110.980375ms
[INFO]  2025/09/15 21:23:12 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 25.986875ms
[INFO]  2025/09/15 21:23:13 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 7.411541ms
[INFO]  2025/09/15 21:23:14 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 3.591ms
[INFO]  2025/09/15 21:23:30 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 9.31775ms
[INFO]  2025/09/15 21:23:33 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:23:33 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 61.383584ms
[INFO]  2025/09/15 21:23:33 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.865875ms
[INFO]  2025/09/15 21:23:39 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=19, 附件数量=0
[INFO]  2025/09/15 21:23:39 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:23:39 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:23:39 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=772.177833ms
[INFO]  2025/09/15 21:23:39 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 774.190792ms
[INFO]  2025/09/15 21:23:39 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:39 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=19, 附件数量=0
[INFO]  2025/09/15 21:23:39 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[DEBUG] 2025/09/15 21:23:39 logger.go:68: 用户消息保存成功: ID=158
[INFO]  2025/09/15 21:23:39 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:23:39 logger.go:68: AI回复生成完成，内容长度: 564
[DEBUG] 2025/09/15 21:23:39 logger.go:68: AI回复保存成功: ID=159
[INFO]  2025/09/15 21:23:39 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=17.936333ms
[INFO]  2025/09/15 21:23:39 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:39 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 18.087209ms
[INFO]  2025/09/15 21:23:39 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:43 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=19, 附件数量=0
[INFO]  2025/09/15 21:23:43 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:23:43 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:23:43 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=720.055292ms
[INFO]  2025/09/15 21:23:43 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 720.131375ms
[INFO]  2025/09/15 21:23:43 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:43 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=19, 附件数量=0
[INFO]  2025/09/15 21:23:43 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[DEBUG] 2025/09/15 21:23:43 logger.go:68: 用户消息保存成功: ID=162
[INFO]  2025/09/15 21:23:43 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:23:43 logger.go:68: AI回复生成完成，内容长度: 564
[DEBUG] 2025/09/15 21:23:43 logger.go:68: AI回复保存成功: ID=163
[INFO]  2025/09/15 21:23:43 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=6.171875ms
[INFO]  2025/09/15 21:23:43 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:43 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 6.302416ms
[INFO]  2025/09/15 21:23:43 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:50 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[INFO]  2025/09/15 21:23:50 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:23:50 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:23:50 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=745.858ms
[INFO]  2025/09/15 21:23:50 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 745.92525ms
[INFO]  2025/09/15 21:23:50 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:50 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[INFO]  2025/09/15 21:23:50 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[DEBUG] 2025/09/15 21:23:50 logger.go:68: 用户消息保存成功: ID=166
[INFO]  2025/09/15 21:23:50 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:23:50 logger.go:68: AI回复生成完成，内容长度: 611
[DEBUG] 2025/09/15 21:23:50 logger.go:68: AI回复保存成功: ID=167
[INFO]  2025/09/15 21:23:50 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=11.4905ms
[INFO]  2025/09/15 21:23:50 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 11.616083ms
[INFO]  2025/09/15 21:23:50 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:23:50 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:24:12 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[INFO]  2025/09/15 21:24:12 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:24:12 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:24:12 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=817.96575ms
[INFO]  2025/09/15 21:24:12 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:24:12 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 818.01675ms
[INFO]  2025/09/15 21:24:12 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:24:12 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[DEBUG] 2025/09/15 21:24:12 logger.go:68: 用户消息保存成功: ID=170
[INFO]  2025/09/15 21:24:12 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:24:12 logger.go:68: AI回复生成完成，内容长度: 611
[DEBUG] 2025/09/15 21:24:12 logger.go:68: AI回复保存成功: ID=171
[INFO]  2025/09/15 21:24:12 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=16.124875ms
[INFO]  2025/09/15 21:24:12 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:24:12 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 16.293708ms
[INFO]  2025/09/15 21:24:12 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:32:10 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 20.153458ms
[INFO]  2025/09/15 21:32:14 logger.go:73: 收到流式消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[INFO]  2025/09/15 21:32:14 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:32:14 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:32:14 logger.go:73: 流式消息处理完成: ThreadID=offer-1757939893659-72w5wjhie, 总耗时=670.856917ms
[INFO]  2025/09/15 21:32:14 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 670.893833ms
[INFO]  2025/09/15 21:32:14 logger.go:73: 保存职业历史记录: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:32:14 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:32:14 logger.go:73: 收到消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 21:32:14 logger.go:68: 用户消息保存成功: ID=174
[INFO]  2025/09/15 21:32:14 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:32:14 logger.go:68: AI回复生成完成，内容长度: 617
[DEBUG] 2025/09/15 21:32:14 logger.go:68: AI回复保存成功: ID=175
[INFO]  2025/09/15 21:32:14 logger.go:73: 消息处理完成: ThreadID=offer-1757939893659-72w5wjhie, 总耗时=3.788292ms
[INFO]  2025/09/15 21:32:14 logger.go:73: 保存职业历史记录: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:32:14 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 3.88975ms
[INFO]  2025/09/15 21:32:14 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:32:50 logger.go:73: 收到流式消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[INFO]  2025/09/15 21:32:50 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:33:39 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:33:39 logger.go:73: 流式消息处理完成: ThreadID=offer-1757939893659-72w5wjhie, 总耗时=48.966121125s
[INFO]  2025/09/15 21:33:39 logger.go:73: 保存职业历史记录: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:33:39 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 48.9661905s
[INFO]  2025/09/15 21:33:39 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:33:39 logger.go:73: 收到消息请求: ThreadID=offer-1757939893659-72w5wjhie, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 21:33:39 logger.go:68: 用户消息保存成功: ID=178
[INFO]  2025/09/15 21:33:39 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:33:49 logger.go:68: AI回复生成完成，内容长度: 617
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 13.335666ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 23.713375ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.815333ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.277417ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=9
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.468291ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=9
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.836167ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 3.112875ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.046375ms
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.384542ms
[DEBUG] 2025/09/15 21:33:49 logger.go:68: AI回复保存成功: ID=179
[INFO]  2025/09/15 21:33:49 logger.go:73: 消息处理完成: ThreadID=offer-1757939893659-72w5wjhie, 总耗时=9.400709584s
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 9.400782416s
[INFO]  2025/09/15 21:33:49 logger.go:73: 保存职业历史记录: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:33:49 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757939893659-72w5wjhie, Category=offer
[INFO]  2025/09/15 21:33:49 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:33:49 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.269208ms
[INFO]  2025/09/15 21:33:52 logger.go:73: 收到流式消息请求: ThreadID=contract-1757943232395-tmz8hbe6o, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[INFO]  2025/09/15 21:33:52 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:35:17 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 21:35:17 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 21:35:17 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 21:35:17 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 21:35:18 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 21:35:18 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.860458ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 10.606542ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.69525ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 6.445917ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=10
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 5.046ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=10
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 6.061833ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.996667ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 3.21375ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.564291ms
[INFO]  2025/09/15 21:35:21 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:35:21 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.978417ms
[INFO]  2025/09/15 21:35:22 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 5.112083ms
[INFO]  2025/09/15 21:35:27 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[INFO]  2025/09/15 21:35:27 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:35:35 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:35:35 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=8.680828833s
[INFO]  2025/09/15 21:35:35 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:35:35 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 8.680911917s
[INFO]  2025/09/15 21:35:35 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:35:35 logger.go:73: 收到消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=qwen-v3-235b, Content长度=66, 附件数量=0
[DEBUG] 2025/09/15 21:35:35 logger.go:68: 用户消息保存成功: ID=183
[INFO]  2025/09/15 21:35:35 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:35:38 logger.go:68: AI回复生成完成，内容长度: 822
[DEBUG] 2025/09/15 21:35:38 logger.go:68: AI回复保存成功: ID=184
[INFO]  2025/09/15 21:35:38 logger.go:73: 消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=2.169805334s
[INFO]  2025/09/15 21:35:38 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:35:38 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 2.169890125s
[INFO]  2025/09/15 21:35:38 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:35:52 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 54.210625ms
[INFO]  2025/09/15 21:35:54 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 1.324333ms
[INFO]  2025/09/15 21:35:56 logger.go:73: 收到流式消息请求: ThreadID=offer-1757943354615-4o0jr58ku, ModelID=qwen-v3-235b, Content长度=71, 附件数量=0
[INFO]  2025/09/15 21:35:56 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:36:02 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:36:02 logger.go:73: 流式消息处理完成: ThreadID=offer-1757943354615-4o0jr58ku, 总耗时=5.936222209s
[INFO]  2025/09/15 21:36:02 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:36:02 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 5.936269084s
[INFO]  2025/09/15 21:36:02 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:36:02 logger.go:73: 收到消息请求: ThreadID=offer-1757943354615-4o0jr58ku, ModelID=qwen-v3-235b, Content长度=71, 附件数量=0
[DEBUG] 2025/09/15 21:36:02 logger.go:68: 用户消息保存成功: ID=187
[INFO]  2025/09/15 21:36:02 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:36:12 logger.go:68: AI回复生成完成，内容长度: 644
[DEBUG] 2025/09/15 21:36:12 logger.go:68: AI回复保存成功: ID=188
[INFO]  2025/09/15 21:36:12 logger.go:73: 消息处理完成: ThreadID=offer-1757943354615-4o0jr58ku, 总耗时=9.450133125s
[INFO]  2025/09/15 21:36:12 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:36:12 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 9.450223333s
[INFO]  2025/09/15 21:36:12 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:36:27 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943387224-rwhwzn7jn | IP: ::1 | 状态: 200 | 耗时: 20.412959ms
[INFO]  2025/09/15 21:36:28 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 3.960833ms
[INFO]  2025/09/15 21:36:47 logger.go:73: 收到流式消息请求: ThreadID=offer-1757943354615-4o0jr58ku, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[INFO]  2025/09/15 21:36:47 logger.go:73: 使用模拟流式回复: ModelID=qwen-v3-235b
[INFO]  2025/09/15 21:37:04 logger.go:73: 模拟流式回复完成
[INFO]  2025/09/15 21:37:04 logger.go:73: 流式消息处理完成: ThreadID=offer-1757943354615-4o0jr58ku, 总耗时=16.326474041s
[INFO]  2025/09/15 21:37:04 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:37:04 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 16.326537334s
[INFO]  2025/09/15 21:37:04 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:37:04 logger.go:73: 收到消息请求: ThreadID=offer-1757943354615-4o0jr58ku, ModelID=qwen-v3-235b, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 21:37:04 logger.go:68: 用户消息保存成功: ID=191
[INFO]  2025/09/15 21:37:04 logger.go:73: 开始生成AI回复: ModelID=qwen-v3-235b, DeepThinking=false, NetworkSearch=false
[DEBUG] 2025/09/15 21:37:10 logger.go:68: AI回复生成完成，内容长度: 645
[DEBUG] 2025/09/15 21:37:10 logger.go:68: AI回复保存成功: ID=192
[INFO]  2025/09/15 21:37:10 logger.go:73: 消息处理完成: ThreadID=offer-1757943354615-4o0jr58ku, 总耗时=6.673193667s
[INFO]  2025/09/15 21:37:10 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:37:10 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 6.673410083s
[INFO]  2025/09/15 21:37:10 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:37:16 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:37:16 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.908167ms
[INFO]  2025/09/15 21:37:16 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 4.033083ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取用户默认模型: UserID=default-user, Model=qwen-v3-235b
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 3.429041ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 3.613583ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=14
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 1.743459ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=14
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 1.39675ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 20.654334ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.344083ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.436958ms
[INFO]  2025/09/15 21:37:17 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=6
[INFO]  2025/09/15 21:37:17 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 39.52625ms
[INFO]  2025/09/15 21:37:18 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.398917ms
[INFO]  2025/09/15 21:37:20 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 2.747625ms
[INFO]  2025/09/15 21:38:12 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=azure/gpt-5-mini
[INFO]  2025/09/15 21:38:12 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 20.894ms
[INFO]  2025/09/15 21:38:49 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943529391-rif06ozkt | IP: ::1 | 状态: 200 | 耗时: 16.99375ms
[INFO]  2025/09/15 21:38:51 logger.go:73: 收到消息请求: ThreadID=offer-1757943529391-rif06ozkt, ModelID=azure/gpt-5-mini, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 21:38:51 logger.go:68: 用户消息保存成功: ID=193
[INFO]  2025/09/15 21:38:51 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5-mini, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 21:38:54 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5-mini, Input长度=72
[INFO]  2025/09/15 21:39:24 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 21:39:24 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 21:39:24 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 21:39:24 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 21:39:25 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 21:39:25 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 21:39:30 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:39:30 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 38.221584ms
[INFO]  2025/09/15 21:39:39 logger.go:73: 收到流式消息请求: ThreadID=offer-1757943529391-rif06ozkt, ModelID=bailian/qwen-flash, Content长度=72, 附件数量=0
[INFO]  2025/09/15 21:39:39 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:39:48 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:39:48 logger.go:73: 流式消息处理完成: ThreadID=offer-1757943529391-rif06ozkt, 总耗时=8.7285005s
[INFO]  2025/09/15 21:39:48 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 8.730716291s
[INFO]  2025/09/15 21:39:48 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:39:48 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:40:14 logger.go:73: 收到流式消息请求: ThreadID=offer-1757943529391-rif06ozkt, ModelID=bailian/qwen-flash, Content长度=227, 附件数量=0
[INFO]  2025/09/15 21:40:14 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:40:20 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:40:20 logger.go:73: 流式消息处理完成: ThreadID=offer-1757943529391-rif06ozkt, 总耗时=6.04386775s
[INFO]  2025/09/15 21:40:20 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 6.043935292s
[INFO]  2025/09/15 21:40:20 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:40:20 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:40:29 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 3.970792ms
[INFO]  2025/09/15 21:40:29 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757939893659-72w5wjhie | IP: ::1 | 状态: 200 | 耗时: 3.039625ms
[INFO]  2025/09/15 21:40:31 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 3.418875ms
[INFO]  2025/09/15 21:40:32 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.266875ms
[INFO]  2025/09/15 21:40:35 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.407875ms
[INFO]  2025/09/15 21:40:39 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.099459ms
[INFO]  2025/09/15 21:40:40 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 2.860167ms
[INFO]  2025/09/15 21:40:40 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 1.303916ms
[INFO]  2025/09/15 21:40:42 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.484583ms
[INFO]  2025/09/15 21:41:10 logger.go:73: 收到流式消息请求: ThreadID=contract-1757938223182-t8ty9k6ux, ModelID=bailian/qwen-flash, Content长度=64, 附件数量=0
[INFO]  2025/09/15 21:41:10 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:41:17 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:41:17 logger.go:73: 流式消息处理完成: ThreadID=contract-1757938223182-t8ty9k6ux, 总耗时=6.598917208s
[INFO]  2025/09/15 21:41:17 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 6.599014666s
[INFO]  2025/09/15 21:41:17 logger.go:73: 保存职业历史记录: ThreadID=contract-1757938223182-t8ty9k6ux, Category=contract
[INFO]  2025/09/15 21:41:17 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757938223182-t8ty9k6ux, Category=monitor
[INFO]  2025/09/15 21:41:34 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 1.641083ms
[INFO]  2025/09/15 21:41:35 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.744667ms
[INFO]  2025/09/15 21:42:07 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.655084ms
[INFO]  2025/09/15 21:42:07 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 1.412416ms
[INFO]  2025/09/15 21:42:09 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 2.158ms
[INFO]  2025/09/15 21:42:12 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 1.959708ms
[INFO]  2025/09/15 21:42:21 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 14.966ms
[INFO]  2025/09/15 21:42:25 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 5.310583ms
[INFO]  2025/09/15 21:42:31 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 1.353167ms
[INFO]  2025/09/15 21:42:36 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 1.499ms
[INFO]  2025/09/15 21:42:57 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 2.985667ms
[INFO]  2025/09/15 21:42:59 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.755083ms
[INFO]  2025/09/15 21:43:00 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.675333ms
[INFO]  2025/09/15 21:43:01 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.438625ms
[INFO]  2025/09/15 21:43:10 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=employment, FileName=在职证明示例.md
[INFO]  2025/09/15 21:43:10 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 13.717375ms
[ERROR] 2025/09/15 21:43:11 logger.go:83: AI提取在职情况信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:43:11 logger.go:83: AI文档信息提取失败: DocumentID=30, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:43:11 logger.go:83: MD文档自动分析失败: DocumentID=30, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 21:43:13 logger.go:73: HTTP请求: GET /api/users/default-user/documents/30/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.501708ms
[INFO]  2025/09/15 21:43:17 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:17 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.507833ms
[INFO]  2025/09/15 21:43:17 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:17 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 985.042µs
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 36.8195ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 10.274875ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 38.733084ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.246417ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 15.917083ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 16.825375ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 24.819084ms
[INFO]  2025/09/15 21:43:18 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.544125ms
[INFO]  2025/09/15 21:43:18 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.517834ms
[INFO]  2025/09/15 21:43:25 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.705708ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.270083ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.184084ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 1.937208ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.791667ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.16275ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.02725ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 4.580542ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.670791ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.9935ms
[INFO]  2025/09/15 21:43:27 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:27 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.119ms
[INFO]  2025/09/15 21:43:28 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 4.064667ms
[INFO]  2025/09/15 21:43:35 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943529391-rif06ozkt | IP: ::1 | 状态: 200 | 耗时: 3.926208ms
[INFO]  2025/09/15 21:43:36 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 2.386625ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.332625ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 1.864667ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.129666ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 5.334417ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.533541ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=16
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 3.031583ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 3.729958ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.303ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.856916ms
[INFO]  2025/09/15 21:43:40 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:43:40 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 3.492833ms
[INFO]  2025/09/15 21:43:41 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757752158134-7xma1m6uf | IP: ::1 | 状态: 200 | 耗时: 3.952709ms
[INFO]  2025/09/15 21:43:56 logger.go:73: 收到流式消息请求: ThreadID=contract-1757752158134-7xma1m6uf, ModelID=bailian/qwen-flash, Content长度=66, 附件数量=0
[INFO]  2025/09/15 21:43:56 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:43:58 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:43:58 logger.go:73: 流式消息处理完成: ThreadID=contract-1757752158134-7xma1m6uf, 总耗时=2.136939334s
[INFO]  2025/09/15 21:43:58 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 2.137017417s
[INFO]  2025/09/15 21:43:58 logger.go:73: 保存职业历史记录: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:43:58 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757752158134-7xma1m6uf, Category=contract
[INFO]  2025/09/15 21:44:11 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.636833ms
[INFO]  2025/09/15 21:44:16 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=90, 附件数量=0
[INFO]  2025/09/15 21:44:16 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:44:19 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:44:19 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=2.526701833s
[INFO]  2025/09/15 21:44:19 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 2.526744542s
[INFO]  2025/09/15 21:44:19 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:44:19 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:45:20 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943529391-rif06ozkt | IP: ::1 | 状态: 200 | 耗时: 5.099042ms
[INFO]  2025/09/15 21:45:27 logger.go:73: 收到流式消息请求: ThreadID=offer-1757943529391-rif06ozkt, ModelID=bailian/qwen-flash, Content长度=31, 附件数量=0
[INFO]  2025/09/15 21:45:27 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:45:30 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:45:30 logger.go:73: 流式消息处理完成: ThreadID=offer-1757943529391-rif06ozkt, 总耗时=3.019072833s
[INFO]  2025/09/15 21:45:30 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:45:30 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 3.019115625s
[INFO]  2025/09/15 21:45:30 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943529391-rif06ozkt, Category=offer
[INFO]  2025/09/15 21:45:32 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 1.536666ms
[INFO]  2025/09/15 21:45:32 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943529391-rif06ozkt | IP: ::1 | 状态: 200 | 耗时: 1.513708ms
[INFO]  2025/09/15 21:45:33 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 3.493333ms
[INFO]  2025/09/15 21:45:35 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=azure/gpt-5
[INFO]  2025/09/15 21:45:35 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 5.530584ms
[INFO]  2025/09/15 21:45:55 logger.go:73: 收到消息请求: ThreadID=offer-1757943354615-4o0jr58ku, ModelID=azure/gpt-5, Content长度=72, 附件数量=0
[DEBUG] 2025/09/15 21:45:55 logger.go:68: 用户消息保存成功: ID=206
[INFO]  2025/09/15 21:45:55 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 21:45:58 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5, Input长度=72
[INFO]  2025/09/15 21:46:21 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 3.881709ms
[INFO]  2025/09/15 21:46:22 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.609125ms
[INFO]  2025/09/15 21:46:23 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 1.495125ms
[ERROR] 2025/09/15 21:46:28 logger.go:83: 百炼API调用失败: ModelID=azure/gpt-5, 耗时=30.001754375s, 错误=发送请求失败: Post "http://higress-pirate-prod-gao.weizhipin.com/v1/chat/completions": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
[DEBUG] 2025/09/15 21:46:28 logger.go:68: AI回复生成完成，内容长度: 236
[DEBUG] 2025/09/15 21:46:28 logger.go:68: AI回复保存成功: ID=207
[INFO]  2025/09/15 21:46:28 logger.go:73: 消息处理完成: ThreadID=offer-1757943354615-4o0jr58ku, 总耗时=32.436631209s
[INFO]  2025/09/15 21:46:28 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 32.436740208s
[INFO]  2025/09/15 21:46:28 logger.go:73: 保存职业历史记录: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:46:28 logger.go:73: 职业历史记录保存成功: ThreadID=offer-1757943354615-4o0jr58ku, Category=offer
[INFO]  2025/09/15 21:46:28 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.933875ms
[INFO]  2025/09/15 21:46:55 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=career, 数量=0
[WARN]  2025/09/15 21:46:55 logger.go:78: 用户档案不存在，返回默认模型: UserID=user-1757938157855
[INFO]  2025/09/15 21:46:55 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.231958ms
[INFO]  2025/09/15 21:46:55 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/default-model | IP: ::1 | 状态: 200 | 耗时: 2.937417ms
[INFO]  2025/09/15 21:46:55 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=offer, 数量=0
[INFO]  2025/09/15 21:46:55 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.6655ms
[INFO]  2025/09/15 21:46:55 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=contract, 数量=0
[INFO]  2025/09/15 21:46:55 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.637959ms
[INFO]  2025/09/15 21:46:55 logger.go:73: 获取职业历史记录: UserID=user-1757938157855, Category=monitor, 数量=0
[INFO]  2025/09/15 21:46:55 logger.go:73: HTTP请求: GET /api/users/user-1757938157855/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 3.662958ms
[INFO]  2025/09/15 21:46:56 logger.go:73: 获取用户默认模型: UserID=default-user, Model=azure/gpt-5
[INFO]  2025/09/15 21:46:56 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.24875ms
[INFO]  2025/09/15 21:46:56 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=5
[INFO]  2025/09/15 21:46:56 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.978166ms
[INFO]  2025/09/15 21:46:56 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:46:56 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.034416ms
[INFO]  2025/09/15 21:46:56 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:46:56 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 2.414292ms
[INFO]  2025/09/15 21:46:56 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=7
[INFO]  2025/09/15 21:46:56 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 1.396792ms
[INFO]  2025/09/15 21:48:34 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 4.113083ms
[INFO]  2025/09/15 21:48:39 logger.go:73: 收到消息请求: ThreadID=contract-1757938223182-t8ty9k6ux, ModelID=azure/gpt-5, Content长度=64, 附件数量=0
[DEBUG] 2025/09/15 21:48:39 logger.go:68: 用户消息保存成功: ID=208
[INFO]  2025/09/15 21:48:39 logger.go:73: 开始生成AI回复: ModelID=azure/gpt-5, DeepThinking=false, NetworkSearch=false
[INFO]  2025/09/15 21:48:39 logger.go:73: 开始调用百炼API: ModelID=azure/gpt-5, Input长度=64
[ERROR] 2025/09/15 21:49:09 logger.go:83: 百炼API调用失败: ModelID=azure/gpt-5, 耗时=30.003539625s, 错误=发送请求失败: Post "http://higress-pirate-prod-gao.weizhipin.com/v1/chat/completions": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
[DEBUG] 2025/09/15 21:49:09 logger.go:68: AI回复生成完成，内容长度: 236
[DEBUG] 2025/09/15 21:49:09 logger.go:68: AI回复保存成功: ID=209
[INFO]  2025/09/15 21:49:09 logger.go:73: 消息处理完成: ThreadID=contract-1757938223182-t8ty9k6ux, 总耗时=30.011472583s
[INFO]  2025/09/15 21:49:09 logger.go:73: 保存职业历史记录: ThreadID=contract-1757938223182-t8ty9k6ux, Category=contract
[INFO]  2025/09/15 21:49:09 logger.go:73: HTTP请求: POST /api/messages | IP: ::1 | 状态: 200 | 耗时: 30.01166925s
[INFO]  2025/09/15 21:49:09 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757938223182-t8ty9k6ux, Category=monitor
[INFO]  2025/09/15 21:49:19 logger.go:73: 用户默认模型更新成功: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:49:19 logger.go:73: HTTP请求: PUT /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 11.4435ms
[INFO]  2025/09/15 21:49:22 logger.go:73: 收到流式消息请求: ThreadID=contract-1757938223182-t8ty9k6ux, ModelID=bailian/qwen-flash, Content长度=64, 附件数量=0
[INFO]  2025/09/15 21:49:22 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:49:29 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:49:29 logger.go:73: 流式消息处理完成: ThreadID=contract-1757938223182-t8ty9k6ux, 总耗时=7.502088959s
[INFO]  2025/09/15 21:49:29 logger.go:73: 保存职业历史记录: ThreadID=contract-1757938223182-t8ty9k6ux, Category=contract
[INFO]  2025/09/15 21:49:29 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 7.502164s
[INFO]  2025/09/15 21:49:29 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757938223182-t8ty9k6ux, Category=monitor
[INFO]  2025/09/15 21:50:15 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 3.348792ms
[INFO]  2025/09/15 21:50:21 logger.go:73: 收到流式消息请求: ThreadID=career-1757938244094-uuv57kxii, ModelID=bailian/qwen-flash, Content长度=59, 附件数量=0
[INFO]  2025/09/15 21:50:21 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:50:25 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757938223182-t8ty9k6ux | IP: ::1 | 状态: 200 | 耗时: 2.320334ms
[INFO]  2025/09/15 21:50:27 logger.go:73: HTTP请求: GET /api/messages?threadId=career-1757938244094-uuv57kxii | IP: ::1 | 状态: 200 | 耗时: 8.029209ms
[INFO]  2025/09/15 21:50:29 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:50:29 logger.go:73: 流式消息处理完成: ThreadID=career-1757938244094-uuv57kxii, 总耗时=8.094192667s
[INFO]  2025/09/15 21:50:29 logger.go:73: 保存职业历史记录: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 21:50:29 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 8.094229208s
[INFO]  2025/09/15 21:50:29 logger.go:73: 职业历史记录保存成功: ThreadID=career-1757938244094-uuv57kxii, Category=career
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 12.232583ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 23.55875ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.303708ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.8835ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 4.922ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 27.660875ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 3.133709ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 3.470875ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 9.14ms
[INFO]  2025/09/15 21:50:34 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:50:34 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.057917ms
[INFO]  2025/09/15 21:50:35 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 1.423417ms
[INFO]  2025/09/15 21:50:36 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=59, 附件数量=0
[INFO]  2025/09/15 21:50:36 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:50:43 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:50:43 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=6.846205125s
[INFO]  2025/09/15 21:50:43 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 6.84627725s
[INFO]  2025/09/15 21:50:43 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:50:43 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:50:49 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 21:50:49 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 14.289708ms
[ERROR] 2025/09/15 21:50:50 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:50:50 logger.go:83: AI文档信息提取失败: DocumentID=31, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:50:50 logger.go:83: MD文档自动分析失败: DocumentID=31, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 21:50:52 logger.go:73: HTTP请求: GET /api/users/default-user/documents/31/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.1085ms
[INFO]  2025/09/15 21:50:54 logger.go:73: HTTP请求: GET /api/users/default-user/documents/31/extracted-info | IP: ::1 | 状态: 400 | 耗时: 903.416µs
[INFO]  2025/09/15 21:50:54 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=27, 附件数量=1
[ERROR] 2025/09/15 21:50:54 logger.go:83: 保存用户消息失败: Error 1366 (HY000): Incorrect string value: '\xE4\xB8\x0A......' for column 'content' at row 1
[INFO]  2025/09/15 21:50:54 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 500 | 耗时: 3.383166ms
[INFO]  2025/09/15 21:52:01 logger.go:73: HTTP请求: GET /api/messages?threadId=offer-1757943354615-4o0jr58ku | IP: ::1 | 状态: 200 | 耗时: 8.208125ms
[INFO]  2025/09/15 21:52:03 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.7675ms
[INFO]  2025/09/15 21:53:46 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=59, 附件数量=0
[INFO]  2025/09/15 21:53:46 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 21:53:54 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 21:53:54 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=7.607503042s
[INFO]  2025/09/15 21:53:54 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:53:54 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 7.607564125s
[INFO]  2025/09/15 21:53:54 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 21:54:06 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 21:54:06 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 15.18175ms
[ERROR] 2025/09/15 21:54:07 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:54:07 logger.go:83: AI文档信息提取失败: DocumentID=32, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:54:07 logger.go:83: MD文档自动分析失败: DocumentID=32, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 21:54:09 logger.go:73: HTTP请求: GET /api/users/default-user/documents/32/extracted-info | IP: ::1 | 状态: 400 | 耗时: 14.504625ms
[INFO]  2025/09/15 21:54:54 logger.go:73: HTTP请求: GET /api/users/default-user/documents/32/extracted-info | IP: ::1 | 状态: 400 | 耗时: 14.611333ms
[INFO]  2025/09/15 21:54:54 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=18, 附件数量=1
[ERROR] 2025/09/15 21:57:25 logger.go:83: 保存用户消息失败: Error 1366 (HY000): Incorrect string value: '\xE4\xB8\x0A......' for column 'content' at row 1
[INFO]  2025/09/15 21:57:25 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 500 | 耗时: 2m31.126422959s
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 92.012125ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 118.434084ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 14.625834ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 18.831542ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 60.7825ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 61.233375ms
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 63.902ms
[INFO]  2025/09/15 21:57:28 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:57:28 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.988125ms
[INFO]  2025/09/15 21:57:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:57:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 30.347334ms
[INFO]  2025/09/15 21:57:29 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:57:29 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.385416ms
[INFO]  2025/09/15 21:57:29 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 3.778959ms
[INFO]  2025/09/15 21:57:48 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 21:57:48 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 21:57:48 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 21:57:48 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 21:57:48 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 21:57:48 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 8.806916ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 7.705958ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 1.189084ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 10.648291ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 2.449917ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 10.713208ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 43.657625ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 28.268542ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 24.558208ms
[INFO]  2025/09/15 21:57:51 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 21:57:51 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.63025ms
[INFO]  2025/09/15 21:57:52 logger.go:73: HTTP请求: GET /api/messages?threadId=contract-1757899203457-1zvvs21mq | IP: ::1 | 状态: 200 | 耗时: 2.50625ms
[INFO]  2025/09/15 21:57:57 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 21:57:57 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 32.214125ms
[ERROR] 2025/09/15 21:57:58 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:57:58 logger.go:83: AI文档信息提取失败: DocumentID=33, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:57:58 logger.go:83: MD文档自动分析失败: DocumentID=33, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 21:58:00 logger.go:73: HTTP请求: GET /api/users/default-user/documents/33/extracted-info | IP: ::1 | 状态: 400 | 耗时: 1.212375ms
[INFO]  2025/09/15 21:58:00 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=9, 附件数量=1
[INFO]  2025/09/15 21:58:03 logger.go:73: HTTP请求: GET /api/users/default-user/documents/33/extracted-info | IP: ::1 | 状态: 400 | 耗时: 16.264291ms
[ERROR] 2025/09/15 21:58:03 logger.go:83: 保存用户消息失败: Error 1366 (HY000): Incorrect string value: '\xE4\xB8\x0A......' for column 'content' at row 1
[INFO]  2025/09/15 21:58:03 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 500 | 耗时: 2.569894333s
[INFO]  2025/09/15 21:59:34 logger.go:73: 日志系统初始化成功，日志目录: ./logs
[INFO]  2025/09/15 21:59:34 logger.go:73: 开始连接数据库: DSN=root:@tcp(127.0.0.1:3306)/ai_career_buddy?charset=utf8mb4&parseTime=True&loc=Local
[INFO]  2025/09/15 21:59:34 logger.go:73: 数据库连接成功: 类型=MySQL
[INFO]  2025/09/15 21:59:34 logger.go:73: 数据库连接成功
[INFO]  2025/09/15 21:59:34 logger.go:73: 数据库表迁移完成
[INFO]  2025/09/15 21:59:34 logger.go:73: AI职场管家服务启动，监听端口: 8080
[INFO]  2025/09/15 21:59:41 logger.go:73: 用户文档上传成功: UserID=default-user, DocumentType=contract, FileName=劳动合同示例.md
[INFO]  2025/09/15 21:59:41 logger.go:73: HTTP请求: POST /api/users/default-user/documents | IP: ::1 | 状态: 200 | 耗时: 9.716583ms
[ERROR] 2025/09/15 21:59:42 logger.go:83: AI提取合同信息失败: API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:59:42 logger.go:83: AI文档信息提取失败: DocumentID=34, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[ERROR] 2025/09/15 21:59:42 logger.go:83: MD文档自动分析失败: DocumentID=34, 错误=API请求失败 (状态码: 503): invalid header value for: x-higress-llm-model
[INFO]  2025/09/15 21:59:44 logger.go:73: HTTP请求: GET /api/users/default-user/documents/34/extracted-info | IP: ::1 | 状态: 400 | 耗时: 873µs
[INFO]  2025/09/15 21:59:46 logger.go:73: HTTP请求: GET /api/users/default-user/documents/34/extracted-info | IP: ::1 | 状态: 400 | 耗时: 801.417µs
[INFO]  2025/09/15 21:59:46 logger.go:73: 收到流式消息请求: ThreadID=contract-1757899203457-1zvvs21mq, ModelID=bailian/qwen-flash, Content长度=21, 附件数量=1
[INFO]  2025/09/15 21:59:46 logger.go:73: 使用百炼流式API: ModelID=bailian/qwen-flash
[INFO]  2025/09/15 22:00:08 logger.go:73: 百炼流式API调用成功
[INFO]  2025/09/15 22:00:08 logger.go:73: 流式消息处理完成: ThreadID=contract-1757899203457-1zvvs21mq, 总耗时=21.642673958s
[INFO]  2025/09/15 22:00:08 logger.go:73: HTTP请求: POST /api/messages/stream | IP: ::1 | 状态: 200 | 耗时: 21.642771042s
[INFO]  2025/09/15 22:00:08 logger.go:73: 保存职业历史记录: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 22:00:08 logger.go:73: 职业历史记录保存成功: ThreadID=contract-1757899203457-1zvvs21mq, Category=contract
[INFO]  2025/09/15 22:00:30 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 22:00:30 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 571.707ms
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=career, 数量=6
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 2.792561958s
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=career | IP: ::1 | 状态: 200 | 耗时: 2.164525584s
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 1.026481375s
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取用户默认模型: UserID=default-user, Model=bailian/qwen-flash
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/default-model | IP: ::1 | 状态: 200 | 耗时: 41.801875ms
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=offer, 数量=18
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=offer | IP: ::1 | 状态: 200 | 耗时: 34.015917ms
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 32.574375ms
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 4.175416ms
[INFO]  2025/09/15 22:00:32 logger.go:73: 获取职业历史记录: UserID=default-user, Category=contract, 数量=20
[INFO]  2025/09/15 22:00:32 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=contract | IP: ::1 | 状态: 200 | 耗时: 9.249ms
[INFO]  2025/09/15 22:00:33 logger.go:73: 获取职业历史记录: UserID=default-user, Category=monitor, 数量=9
[INFO]  2025/09/15 22:00:33 logger.go:73: HTTP请求: GET /api/users/default-user/career-history?category=monitor | IP: ::1 | 状态: 200 | 耗时: 2.287833ms
