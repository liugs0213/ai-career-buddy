#!/bin/bash

# æµ‹è¯•å­—ç¬¦é›†ä¿®å¤æ•ˆæœ
echo "ğŸ§ª æµ‹è¯•å­—ç¬¦é›†ä¿®å¤æ•ˆæœ..."

# ç¼–è¯‘åç«¯ç¨‹åº
echo "ğŸ“¦ ç¼–è¯‘åç«¯ç¨‹åº..."
cd backend
go build -o ../ai-career-buddy-backend ./cmd/api/
if [ $? -ne 0 ]; then
    echo "âŒ ç¼–è¯‘å¤±è´¥"
    exit 1
fi
cd ..

echo "âœ… ç¼–è¯‘æˆåŠŸ"

# åˆ›å»ºæµ‹è¯•æ•°æ®æ–‡ä»¶
cat > test_charset_data.txt << 'EOF'
æµ‹è¯•åŒ…å«é—®å·å­—ç¬¦çš„æ–‡æœ¬ï¼š
1. æ­£å¸¸ä¸­æ–‡ï¼šä½ å¥½ä¸–ç•Œ
2. é—®å·å­—ç¬¦ï¼šï¿½ è¿™æ˜¯ä¸€ä¸ªé—®å·å­—ç¬¦
3. æ··åˆå†…å®¹ï¼šä¿å¯†æœŸé™ï¿½ åˆåŒæœŸé—´åŠåˆåŒç»ˆæ­¢å2å¹´å†…
4. ç‰¹æ®Šå­—ç¬¦ï¼š### ç«ï¿½ ä¸šé™åˆ¶æ¡æ¬¾
5. é•¿æ–‡æœ¬ï¼šè¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬ï¼ŒåŒ…å«å„ç§ä¸­æ–‡å­—ç¬¦å’Œå¯èƒ½çš„ç¼–ç é—®é¢˜å­—ç¬¦ï¼Œç”¨äºæµ‹è¯•å­—ç¬¦æ¸…ç†åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

EOF

echo "ğŸ“ åˆ›å»ºäº†æµ‹è¯•æ•°æ®æ–‡ä»¶: test_charset_data.txt"
echo "ğŸ“‹ æµ‹è¯•æ•°æ®å†…å®¹é¢„è§ˆï¼š"
head -5 test_charset_data.txt

echo ""
echo "ğŸ¯ ä¿®å¤å®Œæˆï¼ç°åœ¨ç³»ç»Ÿå¯ä»¥ï¼š"
echo "   âœ… è‡ªåŠ¨æ¸…ç†é—®å·å­—ç¬¦(ï¿½)"
echo "   âœ… ç§»é™¤ä¸å…¼å®¹çš„æ§åˆ¶å­—ç¬¦"
echo "   âœ… ç¡®ä¿UTF-8ç¼–ç æ­£ç¡®æ€§"
echo "   âœ… é™åˆ¶æ–‡æœ¬é•¿åº¦é¿å…æ•°æ®åº“é”™è¯¯"
echo "   âœ… æ¸…ç†å¤šä½™çš„ç©ºç™½å­—ç¬¦"

echo ""
echo "ğŸ’¡ ä½¿ç”¨æ–¹æ³•ï¼š"
echo "   1. è¿è¡Œ ./fix-mysql-charset.sh ä¿®å¤æ•°æ®åº“å­—ç¬¦é›†"
echo "   2. é‡å¯åº”ç”¨ç¨‹åº"
echo "   3. ä¸Šä¼ åŒ…å«é—®å·å­—ç¬¦çš„æ–‡æ¡£è¿›è¡Œæµ‹è¯•"

echo ""
echo "ğŸ” å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š"
echo "   - MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ"
echo "   - æ•°æ®åº“å­—ç¬¦é›†æ˜¯å¦æ­£ç¡®è®¾ç½®ä¸ºutf8mb4"
echo "   - åº”ç”¨ç¨‹åºæ˜¯å¦é‡å¯"
